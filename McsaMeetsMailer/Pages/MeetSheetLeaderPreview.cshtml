@page
@model McsaMeetsMailer.Pages.MeetSheetLeaderPreview
@{
  ViewData["Title"] = "Leader Preview";
}

<div class="container" style="padding-top: 10px;">
  <p>
    Filter by leader
    <select id="leaders" onchange="refreshContentFrame()">
      <option value="All">ALL</option>
      @{
        foreach (var leaderName in Model.LeaderNames)
        {
          <option value="@leaderName">@leaderName</option>
        }
      }
    </select>
  </p>
</div>

<div class="container">
  <iframe id="contentFrame" style="width: 100%; height: 80vh;" src="@Url.Content("MeetSheetOnly")">Sorry, your browser does not support i-frames.</iframe>
</div>

<script language="javascript">
  function refreshContentFrame() {
    var leadersDropDown = document.getElementById("leaders");

    var selectedLeaderName = leadersDropDown.options[leadersDropDown.selectedIndex].value;

    var contentFrame = document.getElementById("contentFrame");
    contentFrame.src = "@Url.Content("MeetSheetOnly")";

    if (!(selectedLeaderName === "All")) {
      contentFrame.src += "?leader=" + selectedLeaderName;
    }

    contentFrame.refresh();
  }
</script>